{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Organization</title>
    <link rel="stylesheet" href="{% static 'styles/styles.css' %}">
    <link rel="stylesheet" href="{% static 'styles/org.css' %}">
</head>
<body>

  <div id="sidebar">
    <div id="sidebar_content" class="hidden">
        <p>Profile</p>
        <p><a href="{% url 'core:home' %}">Home</a></p>
        <p><a href="{% url 'core:organization' %}">Organization</a></p>
        <p><a href="{% url 'core:saved' %}">Saved</a></p>
        <p><a href="{% url 'core:email' %}">Email</a></p>
    </div>
    <hr class="divider_sidebar"/>

    <div class="notification_container">
      <!-- Notification Pop-Up -->
        <div id="notification_popup" class="hidden">
          <div id="notification_list">
              <h2>Notifications</h2>
              <ul>
                  <li class="notification_item" data-detail="General meeting at 10:30 AM on January 3, 2024, will be held in the main conference room. All employees are expected to attend this important session where key company updates and strategic initiatives for the upcoming year will be discussed.">
                      <p>Schedule Update</p>
                      <span>Yesterday</span>
                  </li>
                  <li class="notification_item" data-detail="Another meeting detail here.">
                      <p>Schedule Update</p>
                      <span>Yesterday</span>
                  </li>
                  <li class="notification_item" data-detail="Another meeting detail here.">
                    <p>Schedule Update</p>
                    <span>Yesterday</span>
                  </li>
                  <li class="notification_item" data-detail="Another meeting detail here.">
                    <p>Schedule Update</p>
                    <span>Yesterday</span>
                  </li>
              </ul>
          </div>
          <button id="close_notification_popup">Close</button>
      </div>
      <!-- Detailed Notification -->
      <div id="detailed_notification" class="hidden">
          <h2 id="notification_title">Schedule Update</h2>
          <p id="notification_detail"></p>
          <button id="close_detailed_notification">Close</button>
      </div>
    </div>

    <div id="sidebar_icns_grp">
        <div class="nav_item">
            <img id="nav_icon" class="sidebar_icns" style="margin-bottom: -6px;" src="{% static 'Images/Navigation.png' %}" alt="Navigate">
            <p>Navigate</p>
        </div>
        <div class="nav_item">
            <img class="sidebar_icns" src="{% static 'Images/Notification.png' %}" alt="Notification">
            <p>Notification</p>
        </div>
        <div class="nav_item">
            <img class="sidebar_icns" src="{% static 'Images/Settings.png' %}" alt="Settings">
            <p>Settings</p>
        </div>
    </div>
</div>
    <div id="header">
        <div>
            <img id="logo" src="{% static 'Images/Logo.png' %}" alt="ARC.AI Logo">
        </div>
        <div id="header_nav" class="text_white">
            <p><a href="{% url 'core:organization' %}" class="{% if active_page == 'organization' %}active{% endif %}">Organization</a></p>
            <p><a href="{% url 'core:saved' %}" class="{% if active_page == 'saved' %}active{% endif %}">Saved</a></p>
            <p><a href="{% url 'core:email' %}" class="{% if active_page == 'email' %}active{% endif %}">Email</a></p>
        </div>
        <div>
            <img id="account_icn" src="{% static 'Images/Account.png' %}" alt="Account">
        </div>
    </div>
    <div class="contentorg">
        <section class="continue-working">
            <div class="header-with-line">
                <h1 class="Title">Continue Working</h1>
                <hr class="divider"/>
            </div>
            <div class="continue-card">
                <div>
                    <div class="under-image">
                        <img src="{% static 'Images/projunder.png' %}" alt="under image" class="background-image">
                    </div>
                    <div class="project-status-container">  
                        <div class="project-logo">
                            <img src="{% static 'Images/projlogo.png' %}" alt="Project Logo">
                        </div>
                        <div class="FileInfo">
                            <p><strong>New Employee Onboarding System Design</strong></p>
                            <p>Project ID: HR-2024-ONB-01</p>
                            <p class="space">Start Date: 2024/11/10</p>
                            <p>Finished Date: -</p>
                            <p class="status">Ongoing</p>
                        </div>
                    </div>  
                </div>
                <div class="project-details">
                    <h3>Description</h3>
                    <p>Design and planning phase for a new, streamlined digital system to improve the onboarding experience for new hires.</p>
                    <h3>Role</h3>
                    <p>Project Manager</p>
                    <h3>Team</h3>
                    <p>John Doe, Imee Duterte, Sarah Marcos, Ginno Arostique</p>
                    <div class="details-row">
                        <div>
                            <h3>Total Hours Spent</h3>
                            <p>32Hrs</p>
                        </div>
                        <div>
                            <h3>Deadline</h3>
                            <p>2024/11/24</p>
                        </div>
                        <div>
                            <button class="continue-btn">Continue</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    
        <section class="other-projects">
            <div class="header-with-line">
                <h1 class="Title">Project List</h1>
                <hr class="divider"/>
            </div>
            <div class="card-section">
                <div class="card-container">
                  <!-- Repeat this card as needed -->
                   <div class="project-container">
                      <div class="project-card">
                          <div class="card-header">
                            <img src="{% static 'Images/projlogo.png' %}" alt="icon" />
                            <img src="icon2.png" alt="icon" style="filter: brightness(0) invert(1);"  />
                          </div>
                          <div class="card-body">
                            <h3>New Employee Onboarding System Design</h3>
                            <div class="project-details">
                              <p>Project ID: HR-2024-ONB-01</p>
                              <div class="dategroup">
                              <p>Start Date: 2024/11/10</p>
                              <p>Finished Date: -</p>
                              </div>
                            </div>
                            <p class="status" Style="color: #6AFF3C">Completed</p>
                          </div>
                        </div>
                   </div> 
                   <div class="project-container">
                      <div class="project-card">
                          <div class="card-header">
                            <img src="icon1.png" alt="icon" />
                            <img src="icon2.png" alt="icon" style="filter: brightness(0) invert(1);" />
                          </div>
                          <div class="card-body">
                            <h3>New Employee Onboarding System Design</h3>
                            <div class="project-details">
                              <p>Project ID: HR-2024-ONB-01</p>
                              <div class="dategroup">
                              <p>Start Date: 2024/11/10</p>
                              <p>Finished Date: -</p>
                              </div>
                            </div>
                            <p class="status">Ongoing</p>
                          </div>
                        </div>
                   </div> 
                   <div class="project-container">
                      <div class="project-card">
                          <div class="card-header">
                            <img src="icon1.png" alt="icon" />
                            <img src="icon2.png" alt="icon" style="filter: brightness(0) invert(1);" />
                          </div>
                          <div class="card-body">
                            <h3>New Employee Onboarding System Design</h3>
                            <div class="project-details">
                              <p>Project ID: HR-2024-ONB-01</p>
                              <div class="dategroup">
                              <p>Start Date: 2024/11/10</p>
                              <p>Finished Date: -</p>
                              </div>
                            </div>
                            <p class="status" style="color: rgb(201, 46, 46);">Late</p>
                          </div>
                        </div>
                   </div> 
                   <div class="project-container">
                      <div class="project-card">
                          <div class="card-header">
                            <img src="icon1.png" alt="icon" />
                            <img src="icon2.png" alt="icon" style="filter: brightness(0) invert(1);"  />
                          </div>
                          <div class="card-body">
                            <h3>New Employee Onboarding System Design</h3>
                            <div class="project-details">
                              <p>Project ID: HR-2024-ONB-01</p>
                              <div class="dategroup">
                              <p>Start Date: 2024/11/10</p>
                              <p>Finished Date: -</p>
                              </div>
                            </div>
                            <p class="status">Ongoing</p>
                          </div>
                        </div>
                   </div> 
                   <div class="project-container">
                      <div class="project-card">
                          <div class="card-header">
                            <img src="icon1.png" alt="icon" />
                            <img src="icon2.png" alt="icon" style="filter: brightness(0) invert(1);" />
                          </div>
                          <div class="card-body">
                            <h3>New Employee Onboarding System Design</h3>
                            <div class="project-details">
                              <p>Project ID: HR-2024-ONB-01</p>
                              <div class="dategroup">
                              <p>Start Date: 2024/11/10</p>
                              <p>Finished Date: -</p>
                              </div>
                            </div>
                            <p class="status">Ongoing</p>
                          </div>
                        </div>
                   </div> 
                   <div class="project-container">
                      <div class="project-card">
                          <div class="card-header">
                            <img src="icon1.png" alt="icon" />
                            <img src="icon2.png" alt="icon"style="filter: brightness(0) invert(1);"  />
                          </div>
                          <div class="card-body">
                            <h3>New Employee Onboarding System Design</h3>
                            <div class="project-details">
                              <p>Project ID: HR-2024-ONB-01</p>
                              <div class="dategroup">
                              <p>Start Date: 2024/11/10</p>
                              <p>Finished Date: -</p>
                              </div>
                            </div>
                            <p class="status">Ongoing</p>
                          </div>
                        </div>
                   </div> 
                   <div class="project-container">
                      <div class="project-card">
                          <div class="card-header">
                            <img src="icon1.png" alt="icon" />
                            <img src="icon2.png" alt="icon" style="filter: brightness(0) invert(1);" />
                          </div>
                          <div class="card-body">
                            <h3>New Employee Onboarding System Design</h3>
                            <div class="project-details">
                              <p>Project ID: HR-2024-ONB-01</p>
                              <div class="dategroup">
                              <p>Start Date: 2024/11/10</p>
                              <p>Finished Date: -</p>
                              </div>
                            </div>
                            <p class="status">Ongoing</p>
                          </div>
                        </div>
                   </div> 
                   <div class="project-container">
                      <div class="project-card">
                          <div class="card-header">
                            <img src="icon1.png" alt="icon" />
                            <img src="icon2.png" alt="icon"style="filter: brightness(0) invert(1);"  />
                          </div>
                          <div class="card-body">
                            <h3>New Employee Onboarding System Design</h3>
                            <div class="project-details">
                              <p>Project ID: HR-2024-ONB-01</p>
                              <div class="dategroup">
                              <p>Start Date: 2024/11/10</p>
                              <p>Finished Date: -</p>
                              </div>
                            </div>
                            <p class="status">Ongoing</p>
                          </div>
                        </div>
                   </div> 
                   <div class="project-container">
                      <div class="project-card">
                          <div class="card-header">
                            <img src="icon1.png" alt="icon" />
                            <img src="icon2.png" alt="icon" style="filter: brightness(0) invert(1);" />
                          </div>
                          <div class="card-body">
                            <h3>New Employee Onboarding System Design</h3>
                            <div class="project-details">
                              <p>Project ID: HR-2024-ONB-01</p>
                              <div class="dategroup">
                              <p>Start Date: 2024/11/10</p>
                              <p>Finished Date: -</p>
                              </div>
                            </div>
                            <p class="status">Ongoing</p>
                          </div>
                        </div>
                   </div> 
                   <div class="project-container">
                      <div class="project-card">
                          <div class="card-header">
                            <img src="icon1.png" alt="icon"/>
                            <img src="icon2.png" alt="icon"style="filter: brightness(0) invert(1);" />
                          </div>
                          <div class="card-body">
                            <h3>New Employee Onboarding System Design</h3>
                            <div class="project-details">
                              <p>Project ID: HR-2024-ONB-01</p>
                              <div class="dategroup">
                              <p>Start Date: 2024/11/10</p>
                              <p>Finished Date: -</p>
                              </div>
                            </div>
                            <p class="status">Ongoing</p>
                          </div>
                        </div>
                   </div>
                  <!-- Duplicate above block for more cards -->
                </div>
              </div>
        </section>

        <section class="Schedules">
          <div class="header-with-line">
              <h1 class="Title">Schedules</h1>
              <hr class="divider" />
          </div> 
          <div class="schedule-container">
            <div class="schedule-grid">
                <div class="days">
                    <p>Monday</p>
                    <p>Tuesday</p>
                    <p>Wednesday</p>
                    <p>Thursday</p>
                    <p>Friday</p>
                    <p>Saturday</p>
                    <p>Sunday</p>
                </div>
        
                <div class="time-labels">
                    <p>1AM</p>
                    <p>2AM</p>
                    <p>3AM</p>
                    <p>4AM</p>
                    <p>5AM</p>
                    <p>6AM</p>
                    <p>7AM</p>
                    <p>8AM</p>
                    <p>9AM</p>
                    <p>10AM</p>
                    <p>11AM</p>
                    <p>12PM</p>
                    <p>1PM</p>
                    <p>2PM</p>
                    <p>3PM</p>
                    <p>4PM</p>
                    <p>5PM</p>
                    <p>6PM</p>
                    <p>7PM</p>
                    <p>8PM</p>
                    <p>9PM</p>
                    <p>10PM</p>
                    <p>11PM</p>
                    <p>12AM</p>
                </div>
                    <div class="time-slots">
                        <div class="schedule-bars">
                            <div class="bar" style="grid-row: 5; grid-column: 2 / 6; background-color: #353A56;"></div>
                            <div class="bar" style="grid-row: 4; grid-column: 4 / 8; background-color: #6AFF3C;"></div>
                            <div class="bar" style="grid-row: 5; grid-column: 8 / 12; background-color: #FFD700;"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="schedule-navigation">
                <button class="nav-btn" id="prev-week">&lt;</button>
                <p id="week-label">April 1-5</p>
                <button class="nav-btn" id="next-week">&gt;</button>
            </div>
        </section>
  </div> 
    
    

    <script>
        const container = document.querySelector('.card-container');
    
        let isDown = false;
        let startX;
        let scrollLeft;
    
        // Function to calculate dynamic scroll speed based on container width
        function getScrollSpeed() {
            const containerWidth = container.offsetWidth;
            return containerWidth / 500; // Adjust the divisor to control sensitivity
        }
    
        container.addEventListener('mousedown', (e) => {
            isDown = true;
            container.classList.add('active');
            startX = e.pageX - container.offsetLeft;
            scrollLeft = container.scrollLeft;
        });
    
        container.addEventListener('mouseleave', () => {
            isDown = false;
            container.classList.remove('active');
        });
    
        container.addEventListener('mouseup', () => {
            isDown = false;
            container.classList.remove('active');
        });
    
        container.addEventListener('mousemove', (e) => {
            if (!isDown) return;
            e.preventDefault();
            const x = e.pageX - container.offsetLeft;
            const walk = (x - startX) * getScrollSpeed(); // Use dynamic scroll speed
            container.scrollLeft = scrollLeft - walk;
        });
    
        // Optional: Recalculate scroll speed on window resize or zoom
        window.addEventListener('resize', () => {
            getScrollSpeed();
        });
    </script>

    <script>
        // Make each time slot toggle active state when clicked
        document.querySelectorAll('.time-slot').forEach(slot => {
          slot.addEventListener('click', () => {
            slot.classList.toggle('active');
          });
        });
      </script>

      <script>
        const weekLabel = document.getElementById('week-label');
        const prevWeekBtn = document.getElementById('prev-week');
        const nextWeekBtn = document.getElementById('next-week');
        const scheduleBarsContainer = document.querySelector('.schedule-bars');
    
        // Example week data with schedule bars
        const weeks = [
            {
                label: 'March 25-31',
                bars: [
                    { gridRow: 3, gridColumn: '2 / 5', color: '#353A56' },
                    { gridRow: 5, gridColumn: '6 / 10', color: '#6AFF3C' },
                ],
            },
            {
                label: 'April 1-5',
                bars: [
                    { gridRow: 6, gridColumn: '15 / 24', color: '#353A56' },
                    { gridRow: 4, gridColumn: '4 / 8', color: '#6AFF3C' },
                    { gridRow: 5, gridColumn: '8 / 12', color: '#FFD700' },
                ],
            },
            {
                label: 'April 6-12',
                bars: [
                    { gridRow: 2, gridColumn: '3 / 7', color: '#FF5733' },
                    { gridRow: 6, gridColumn: '5 / 9', color: '#33FF57' },
                ],
            },
            {
                label: 'April 13-19',
                bars: [
                    { gridRow: 3, gridColumn: '1 / 4', color: '#FFC300' },
                    { gridRow: 7, gridColumn: '6 / 10', color: '#DAF7A6' },
                ],
            },
            {
                label: 'April 20-26',
                bars: [
                    { gridRow: 4, gridColumn: '2 / 5', color: '#C70039' },
                    { gridRow: 5, gridColumn: '7 / 11', color: '#900C3F' },
                ],
            },
        ];
    
        let currentWeekIndex = 1; // Start at "April 1-5"
    
        // Function to update the week label and schedule bars
        function updateWeek() {
            // Update the week label
            weekLabel.textContent = weeks[currentWeekIndex].label;
    
            // Clear existing bars
            scheduleBarsContainer.innerHTML = '';
    
            // Add new bars for the selected week
            weeks[currentWeekIndex].bars.forEach(bar => {
                const barElement = document.createElement('div');
                barElement.classList.add('bar');
                barElement.style.gridRow = bar.gridRow;
                barElement.style.gridColumn = bar.gridColumn;
                barElement.style.backgroundColor = bar.color;
                scheduleBarsContainer.appendChild(barElement);
            });
        }
    
        // Navigate to the previous week
        prevWeekBtn.addEventListener('click', () => {
            if (currentWeekIndex > 0) {
                currentWeekIndex--;
                updateWeek();
            }
        });
    
        // Navigate to the next week
        nextWeekBtn.addEventListener('click', () => {
            if (currentWeekIndex < weeks.length - 1) {
                currentWeekIndex++;
                updateWeek();
            }
        });
    
        // Initialize the week label and schedule bars
        updateWeek();
    </script>

        {% comment %} SideBar Script {% endcomment %}

        <script>
          const navIcon = document.getElementById("nav_icon");
          const sidebar = document.getElementById("sidebar");
          const sidebarContent = document.getElementById("sidebar_content");
          const navItems = document.querySelectorAll(".nav_item p");
      
          // Function to toggle sidebar expansion
          const toggleSidebar = () => {
              sidebar.classList.toggle("expanded");
      
              if (sidebar.classList.contains("expanded")) {
                  sidebarContent.classList.remove("hidden");
                  navItems.forEach((item) => {
                      item.style.display = "block";
                  });
              } else {
                  sidebarContent.classList.add("hidden");
                  navItems.forEach((item) => {
                      item.style.display = "none";
                  });
              }
          };
      
          // Add click event to the navigation icon
          navIcon.addEventListener("click", (event) => {
              event.stopPropagation(); // Prevent click from propagating to the document
              toggleSidebar();
          });
      
          // Add click event to the "Navigate" <p> text
          document.querySelector(".nav_item p").addEventListener("click", (event) => {
              event.stopPropagation(); // Prevent click from propagating to the document
              toggleSidebar();
          });
      
          // Close sidebar when clicking outside
          document.addEventListener("click", (event) => {
              if (!sidebar.contains(event.target)) {
                  sidebar.classList.remove("expanded");
                  sidebarContent.classList.add("hidden");
                  navItems.forEach((item) => {
                      item.style.display = "none";
                  });
              }
          });
      
          // Initially hide the <p> elements
          navItems.forEach((item) => {
              item.style.display = "none";
          });
      </script>
  
      {% comment %} Notification Pop-Up Script {% endcomment %}
      <script>
        const notificationIcon = document.querySelector('.sidebar_icns[src*="Notification.png"]');
        const notificationPopup = document.getElementById('notification_popup');
        const detailedNotification = document.getElementById('detailed_notification');
        const notificationItems = document.querySelectorAll('.notification_item');
        const closeNotificationPopup = document.getElementById('close_notification_popup');
        const closeDetailedNotification = document.getElementById('close_detailed_notification');
        const notificationDetail = document.getElementById('notification_detail');

        // Function to update the position of detailed notification
        const updateDetailedNotificationPosition = () => {
          const notificationPopupWidth = notificationPopup.classList.contains("hidden") ? 0 : notificationPopup.offsetWidth;
          detailedNotification.style.left = `${220 + 20 + notificationPopupWidth + 20}px`; // Sidebar width + gap + notification popup width + gap
        };
    
        // Show notification pop-up
        notificationIcon.addEventListener('click', () => {
            notificationPopup.classList.remove('hidden'); // Show notification pop-up
        });
    
        // Close notification pop-up
        closeNotificationPopup.addEventListener('click', () => {
            notificationPopup.classList.add('hidden'); // Hide notification pop-up
        });
    
        // Show detailed notification without hiding the notification pop-up
        notificationItems.forEach(item => {
            item.addEventListener('click', () => {
                const detail = item.getAttribute('data-detail');
                notificationDetail.textContent = detail;
                detailedNotification.classList.remove('hidden'); // Show detailed notification
            });
        });
    
        // Close detailed notification
        closeDetailedNotification.addEventListener('click', () => {
            detailedNotification.classList.add('hidden'); // Hide detailed notification
        });
    </script>
</body>
</html>
